<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"> </script>

  <script src="JS/TarotInformation.js"></script>
  <script src="JS/SelectTarotCardName.js"></script>
  <script src="JS/ClearButtonEvent.js"></script>
  <script src="JS/SendButtonEvent.js"></script>
  <script src="JS/Common.js"></script>
  <script src="JS/TarotCardImage.js"></script>
  <script src="JS/TarotCardStatus.js"></script>
  <script src="JS/TarotCardElement.js"></script>
  <script src="JS/TarotCardDescription.js"></script>
  <script src="JS/CardTypeSelectEvent.js"></script>
  <script src="JS/TarotCardCheck.js"></script>
  <script src="JS/FormulaButtonEvent.js"></script>
</head>

<style>
	body{font-family: arial,"Microsoft JhengHei","微軟正黑體",sans-serif !important;}
</style>

<body>




<div class="form-group" style="margin:1%;">
	<label style="display: flex;justify-content: center;font-size:25px;">第一張</label>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" id = "CardType01" CardType="01">
		<option value="Big">大牌</option>
		<option value="Wands">權杖</option>
		<option value="Cup">聖杯</option>
		<option value="Swords">寶劍</option>
		<option value="Pentacles">錢幣</option>
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" id = "Card01" TarotCard="01">
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control" aria-label="Default select example" CardSelectStatus="01" id="CardStatus0">
		<option value="positive">正</option>
		<option value="inverse">逆</option>
	</select>
</div>

<hr style="border:3px dashed #0066CC;"></hr>

<div class="form-group" style="margin:1%;">
	<label style="display: flex;justify-content: center;font-size:25px;">第二張</label>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" id = "CardType02" CardType="02">
		<option value="Big">大牌</option>
		<option value="Wands">權杖</option>
		<option value="Cup">聖杯</option>
		<option value="Swords">寶劍</option>
		<option value="Pentacles">錢幣</option>
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" aria-label="Default select example" id = "Card02" TarotCard="02">
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-select" aria-label="Default select example" CardSelectStatus="02" id="CardStatus1">
	<option value="positive">正</option>
	<option value="inverse">逆</option>
	</select>
</div>

<hr style="border:3px dashed #0066CC;"></hr>

<div class="form-group" style="margin:1%;">
	<label style="display: flex;justify-content: center;font-size:25px;">第三張</label>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" id = "CardType03" CardType="03">
		<option value="Big">大牌</option>
		<option value="Wands">權杖</option>
		<option value="Cup">聖杯</option>
		<option value="Swords">寶劍</option>
		<option value="Pentacles">錢幣</option>
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" aria-label="Default select example" class="form-select" aria-label="Default select example" id = "Card03" TarotCard="03">
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-select" aria-label="Default select example" CardSelectStatus="03" id="CardStatus2">
	<option value="positive">正</option>
	<option value="inverse">逆</option>
	</select>
</div>

<hr style="border:3px dashed #0066CC;"></hr>

<div class="form-group" style="margin:1%;">
	<label style="display: flex;justify-content: center;font-size:25px;">第四張</label>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" id = "CardType04" CardType="04">
		<option value="Big">大牌</option>
		<option value="Wands">權杖</option>
		<option value="Cup">聖杯</option>
		<option value="Swords">寶劍</option>
		<option value="Pentacles">錢幣</option>
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" aria-label="Default select example" class="form-select" aria-label="Default select example" id = "Card04" TarotCard="01">
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-select" aria-label="Default select example" CardSelectStatus="04" id="CardStatus3">
	<option value="positive">正</option>
	<option value="inverse">逆</option>
	</select>
</div>

<hr style="border:3px dashed #0066CC;"></hr>

<div class="form-group" style="margin:1%;">
	<label style="display: flex;justify-content:center;font-size:25px;">第五張</label>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" id = "CardType05" CardType="05">
		<option value="Big">大牌</option>
		<option value="Wands">權杖</option>
		<option value="Cup">聖杯</option>
		<option value="Swords">寶劍</option>
		<option value="Pentacles">錢幣</option>
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-control form-control-lg" aria-label="Default select example" class="form-select" aria-label="Default select example" id = "Card05" TarotCard="01">
	</select>
</div>

<div class="form-group" style="margin:2%;">
	<select class="form-select" aria-label="Default select example" CardSelectStatus="05" id="CardStatus4">
	<option value="positive">正</option>
	<option value="inverse">逆</option>
	</select>
</div>

<hr style="border:3px dashed #0066CC;"></hr>

<div class="form-group" style="margin :0 auto;text-align :center;">
	<input type="button" id="Ouput" class="btn btn-lg btn-primary" value="送出">
</div>

<div  class="form-group" style="margin:3%;border-width:3px;padding:5px;">
	<input type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="FormulaButtonEvent();" id="FormulaButton" class="btn btn-outline-warning" style="display:none;" value="帶牌法">
</div>
<div  class="form-group" style="margin:3%;border-width:3px;border-style:dashed;border-color:#FFAF60;padding:5px;">

<span style="display:inline;width:10%;" TarotImage="01"></span>
<span TarotImage="02"></span>
<span TarotImage="03"></span>
<span TarotImage="04"></span>
<span TarotImage="05"></span>

<hr style="border:3px dashed #0066CC;"></hr>

<div>
	牌面：
	<span CardName="00"></span>
	<span CardName="01"></span>
	<span CardName="02"></span>
	<span CardName="03"></span>
	<span CardName="04"></span>
</div>

<div>
正逆：
<span CardStatus="00"></span>
<span CardStatus="01"></span>
<span CardStatus="02"></span>
<span CardStatus="03"></span>
<span CardStatus="04"></span>
</div>

<div>
	元素：
	<span CardElement="00"></span>
	<span CardElement="01"></span>
	<span CardElement="02"></span>
	<span CardElement="03"></span>
	<span CardElement="04"></span>
</div>

<div>
	元素數量：<span CardElementCount="CardElementCount"></span>
</div>

<hr style="height:5px;border:none;border-top:2px dotted #0000E3; border-width:5px;" />
牌義：
<br>
<div>
	<span CardInformation="00"></span>
	<span CardInformation="01"></span>
	<span CardInformation="02"></span>
	<span CardInformation="03"></span>
	<span CardInformation="04"></span>
</div>


</div>

</body>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id = "FormulaCardInfo">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!--塔羅資料-->
<script>
	var tarotInformation = GetTarotCardInformation();
</script>

<!--參數宣告 -->
<script>
var FormulaCardInfo = document.getElementById("FormulaCardInfo"); //帶牌法modal
var FormulaButton = document.getElementById("FormulaButton"); //帶牌法
var OutputButton = document.getElementById("Ouput"); //送出Button
var ClearButton = document.getElementById("Clear"); //清除Button
var TarotCard = document.querySelectorAll("[TarotCard]"); //塔羅下拉清單
var CardSelectStatus = document.querySelectorAll("select[CardSelectStatus]"); // 正逆下拉清單
var CardName = document.querySelectorAll("[CardName]"); //牌面
var CardType = document.querySelectorAll("[CardType]"); // 分辨大牌、權杖、聖杯、寶劍、錢幣
var CardStatus = document.querySelectorAll("[CardStatus]"); //正逆
var CardElement = document.querySelectorAll("[CardElement]"); //元素
var CardInformation = document.querySelectorAll("[CardInformation]"); //牌義
var TarotImage = document.querySelectorAll("[TarotImage]"); //牌圖
var CardElementCount = document.querySelectorAll("[CardElementCount]"); //元素數量

var tarotCount = 0;

var TarotImageFile = "TarotImage/";
const cardStatusEnum = 
{
	positiveCN : "正",
	positiveEN : "positive",
	reversedCN : "逆",
	water : "水",
	fire : "火",
	wind : "風",
	earth : "土"
};

var elementCount = new Array();

</script>

<!-- Loadding -->
<script>
window.onload = function()
{
	GetTarotSelectData(); //顯示Select塔羅牌名稱
	//ClearButtonEvent(); //清除按鈕事件
	OutputButtonEvent(); //送出按鈕事件
	GetCardTypeButtonOnclik();
}
</script>

<script>


//取得元素數量
function GetElementCountHTML(elementCountArray)
{
	let elementCountMessage = GetElementCount(elementCountArray);
	
	CardElementCount[0].innerHTML = elementCountMessage;
}

/*-----算出各項元素有幾個------*/
function GetElementCount(cardJson)
{
	let fireCount = 0;
	let waterCount = 0;
	let windCount = 0;
	let earthCount = 0;

	for(let i=0;i<cardJson.length;i++)
	{
		if(cardJson[i] == cardStatusEnum.fire)
		{
			fireCount = fireCount + 1;
		}
		if(cardJson[i] == cardStatusEnum.water)
		{
			waterCount = waterCount + 1;
		}
		if(cardJson[i] == cardStatusEnum.wind)
		{
			windCount = windCount + 1;
		}
		if(cardJson[i] == cardStatusEnum.earth)
		{
			earthCount = earthCount + 1;
		}
	}
	
	return "「火：" + fireCount +"個」" + "、" + "「水：" + waterCount +"個」" + "、" + "「風：" + windCount +"個」" + "、" + "「土：" + earthCount + "個」";
}

/*-----Json資料篩選-----*/
function SelectTarotData(TarotName){
	var output = tarotInformation.filter(item => item.Number == TarotName);
	
	return output;
}
function SelectTarotDataIncludes(TarotName){
	var output = tarotInformation.filter(item => item.Number.includes(TarotName));
	
	return output;
}
function SelectTarotDataForNumber(TarotNumberAry){
	const output = tarotInformation.filter(item => TarotNumberAry.includes(item.Number.split('-')[1]) && !item.Number.includes("Big"));

	return output;
}

</script>


</html>